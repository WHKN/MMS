# MMS (会员管理系统)

一个简单而功能完整的会员管理系统，用于管理会员信息、储值和消费记录。系统采用前后端分离架构，提供安全的用户认证和完整的数据管理功能。
![MMS v1 0](https://github.com/user-attachments/assets/0367e6e1-4ebd-4d20-a0e3-f2c4ca027b03)

## 功能特性

- 安全功能
  - 安全登录认证
  - JWT令牌验证
  - 密码加密存储

- 会员管理
  - 添加新会员
  - 编辑会员信息
  - 删除已有会员
  - 会员信息快速搜索

- 储值与消费
  - 会员储值
  - 会员消费
  - 交易记录查询
  - 余额实时更新
  - 储值余额与赠费余额分离管理
  - 消费时优先使用会员赠费余额

- 数据统计
  - 月度信息查看
  - 总储值金额统计
  - 总消费金额统计
  - 交易笔数统计
  - 活跃会员数统计
  - 有效会员数统计

## 技术栈

- 前端
  - Vue 3 - 渐进式JavaScript框架
  - Element Plus - 现代化的UI组件库
  - Vue Router - 官方路由管理器
  - Vite - 下一代前端构建工具

- 后端
  - Node.js + Express - 高效的Web应用框架
  - SQLite 数据库 - 轻量级本地数据存储
  - JWT - 安全的身份认证机制
  - bcrypt - 密码加密
  - Knex - SQL查询构建器

## 数据库结构

系统使用SQLite数据库，包含以下表：

- **admins**: 管理员账户信息
  - id, username, password, created_at

- **members**: 会员信息
  - id, name, phone, balance, bonus_balance, created_at

- **transactions**: 交易记录
  - id, member_id, type, amount, description, created_at

## 安装步骤

1. 克隆项目
```bash
git clone https://github.com/whkn/mms.git
cd MMS
```

2. 运行安装程序
```bash
install.bat
```

安装程序会自动检查：
- Node.js环境
- 必要文件完整性
- 数据库文件
- 项目依赖

## 启动系统

双击运行 `start.vbs` 即可启动系统，该脚本会自动：
1. 启动后端服务器(server.js)
2. 启动前端开发服务器(vite)

启动完成后，在浏览器中访问：http://localhost:5173

推荐将start.vbs添加至您的开机启动项中，启动系统同时自动启动服务

## 使用说明

1. 系统初始化
   - 首次使用创建管理员账户
   - 设置管理员用户名和密码
   - 使用管理员账户登录系统

2. 会员管理
   - 点击"添加会员"按钮创建新会员
   - 在搜索框输入姓名或电话号码查找会员
   - 使用操作栏的按钮进行储值、消费或编辑会员信息

3. 储值/消费
   - 选择会员后，点击相应按钮进行储值或消费操作
   - 输入金额和备注信息
   - 确认后系统自动更新余额
   - 系统支持普通储值和赠费储值两种方式
   - 消费时优先使用赠费余额，不足部分再使用储值余额

4. 查看报表
   - 月度统计可选择月份查看统计信息
   - 可查看储值、消费总额和交易笔数等信息
   - 支持查看活跃会员数和有效会员数
   - 提供详细的月度交易记录

## 注意事项

- 请确保Node.js环境已正确安装
- 后端服务默认运行在3000端口
- 前端开发服务器运行在5173端口
- 建议定期备份数据库文件：vip.db
- 删除会员操作不可恢复，请谨慎操作
- 如需停止服务，请在任务管理器中结束相关Node.js进程

## 开发者

[ WHKN & Claude3.5 ]
